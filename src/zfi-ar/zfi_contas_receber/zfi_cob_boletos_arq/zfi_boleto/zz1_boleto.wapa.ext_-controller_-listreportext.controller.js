sap.ui.define(["sap/m/PDFViewer"],function(e){"use strict";return{onPDFViewer:function(t){var a=sap.ui.getCore().byId(this.oView.sId+"--responsiveTable").getSelectedItems();if(!a.length){sap.m.MessageToast.show("Nenhum registro selecionado.");return}var +
s=new sap.m.Dialog({contentWidth:"300px",resizable:true,type:"Message"});s.setTitle("Download");if(a.length==1){var o=new sap.m.Text({text:"Deseja baixar o boleto selecionado?"})}else{var o=new sap.m.Text({text:"Deseja baixar os boletos dos "+a.length+" +
documentos selecionados?"})}var n=new sap.m.Button({text:"Baixar",type:"Accept",press:function(){s.close();s.destroy();this.getView().removeAllDependents();var t="/sap/opu/odata/SAP/ZFI_BOLETO_SRV/";var o=new sap.ui.model.odata.ODataModel(t,{});for(let s+
=0;s<a.length;s++){var n=a[s].getBindingContext().getObject();var i=t+"pdfSet(Empresa='"+n.Empresa+"',Documento='"+n.Documento+"',Ano='"+n.Ano+"',Item='"+n.Item+"')/$value";var r=new e;r.setSource(i);r.downloadPDF()}sap.ui.getCore().byId(this.oView.sId+"+
--responsiveTable").getModel().refresh(true)}.bind(this)});var i=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){s.close();s.destroy();this.getView().removeAllDependents()}.bind(this)});s.addContent(o);s.setBeginButton(i);s.setEndButton(+
n);s.open();sap.ui.getCore().byId(this.oView.sId+"--responsiveTable").getModel().refresh(true)},onPopup:function(e){this.oDialog=new sap.m.Dialog({id:"pop-up",resizable:true,content:[new sap.m.Label({text:"Email"}),new sap.m.Input({type:"Email",valueStat+
eText:"E-mail deve ser vÃ¡lido.",maxLength:100,id:"inEmail"})],contentHeight:"30%",contentWidth:"30%",verticalScrolling:false,beginButton:new sap.m.Button({press:function(e){this.onEmail(e)}.bind(this),text:"Enviar"}),endButton:new sap.m.Button({press:fun+
ction(){this.getParent().close();this.getParent().destroy()},text:"Cancelar"}),customHeader:new sap.m.Bar({contentMiddle:[new sap.m.Text({text:"Enviar email"})]})});this.oDialog.open()},onEmail:function(e){var t=this.getOwnerComponent().getModel();var a=+
new sap.ui.model.json.JSONModel({Key:"",Email:"",Mensagem:""});sap.ui.getCore().setModel(a,"pop-up");var s={};s=sap.ui.getCore().getModel("pop-up").getData();s.Email=sap.ui.getCore().byId("inEmail").getValue();var o=this.extensionAPI.getSelectedContexts(+
);if(o.length>0){var n=o.reduce(function(e,t){var a=t.getObject();return e+a.Empresa+a.Documento+a.Ano+a.Item+";"},"")}var i="/sap/opu/odata/SAP/ZFI_BOLETO_SRV/";var r=new sap.ui.model.odata.ODataModel(i,false);var l="emailSet(Key='"+n+"',Email='"+s.Emai+
l+"')";r.read(l,null,null,true,function(e){sap.m.MessageBox.success(e.Mensagem)}.bind(this),function(e){if(e.response.body.search("<message>")){var t=e.response.body.split("<message>")[1].split("</message>")[0];alert(t)}else{alert("Falha ao enviar email"+
)}});this.oDialog.close();this.oDialog.destroy()}}});                                                                                                                                                                                                          