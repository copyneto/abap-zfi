sap.ui.define(["jquery.sap.global","sap/m/MessageToast"],function(e,a){"use strict";return sap.ui.controller("br.com.trescoracoes.retiracli.ext.controller.ListReportExt",{cargaArquivo:function(e){var a=new sap.m.Dialog({contentWidth:"350px",resizable:tru+
e,type:"Message"});a.setTitle("Carregar arquivo Excel");var t="/sap/opu/odata/sap/ZFI_CONCESSAO_CRED_SRV/";var s=new sap.ui.model.odata.ODataModel(t,false);var r=t+"excelSet";var o=new sap.ui.unified.FileUploader({width:"100%",fileType:"xlsx,xls",typeMis+
smatch:this.handleTypeMissmatch,uploadComplete:function(e){var t=this.oView.sId+"--responsiveTable";var s=this.byId(t);s.getModel().refresh(true);a.close();a.destroy();if(e.mParameters.status=="200"||e.mParameters.status=="201"){sap.m.MessageToast.show("+
Carga realizada com sucesso.")}else{if(e.mParameters.response){alert("Return Code: "+e.mParameters.response,"Response","Response")}}}.bind(this)});o.setName("Simple Uploader");o.setUploadUrl(r);o.setSendXHR(true);o.setUseMultipart(false);o.setUploadOnCha+
nge(false);var i=new sap.ui.unified.FileUploaderParameter({name:"x-csrf-token",value:s.getSecurityToken()});o.insertHeaderParameter(i);var n=new sap.m.Button({text:"Upload",type:"Accept",press:function(){var e=o.getFocusDomRef();var a=e.files[0];if(o.get+
Value()===""){sap.m.MessageToast.show("Favor selecionar um arquivo");return}var t=new sap.ui.unified.FileUploaderParameter({name:"Content-Type",value:a.type});o.insertHeaderParameter(t);o.insertHeaderParameter(new sap.ui.unified.FileUploaderParameter({na+
me:"SLUG",value:o.getValue()+";"+"C"}));o.upload()}.bind(this)});var l=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){a.close();a.destroy();this.getView().removeAllDependents()}.bind(this)});a.addContent(o);a.setBeginButton(l);a.setEndB+
utton(n);a.open()},handleTypeMissmatch:function(t){var s=t.getSource().getFileType();e.each(s,function(e,a){s[e]="*."+a});var r=s.join(", ");a.show("O tipo do arquivo *."+t.getParameter("fileType")+" não é suportado. Escolha um dos tipos a seguir: "+r)}}+
)});                                                                                                                                                                                                                                                           